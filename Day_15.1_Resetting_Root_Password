.....................................32.32-Day-15_Resetting_Root_Password.....................................................


we have security system in linux called :(SElinux)

it gives each file an lable(context) like permmitions or the file job to know the accessablity of that file to 
the system services


NOTE: we can show the lebl by using : 

command : ls -lZ  file-path  or ls --context file-path


NOTE: SElinux every time chick the lables of files when booting the machine 

so if we enter recovery mode and reset password(edit passwd file) kernal will remove the lable of passwd file so SElinux won't know the file so system will fail to boot

so after reset password we must retun the last lable to its file (/etc/passwd)

-------------------------------------------------------------------------

to enter recovery mode with root accesse to reset password

1- reboot machine or boot it 

2- in showing entry menues enter E to edid conf-file

3- in the line linux16 at the end write rd.break

4- enter ctrl+x

5-know we enter the root mode 

NOTE: kernal has its mini file-system like / 

6- enter mount

-till now root file system we see still the file system on the kernal witch is an small copy of the main file system (/) 
  and it mounted in the memory now
 
-and the root file system (/) of partition sda1 is mounted in /sysroot
and system will show just the small copy of the kernal 

-so we will tell it that the root file system is in ( /sysroot ) to access it and show it with its all abilities 

NOTE: the main root file system is read only now

-so we will change it into read write permission

------to mount root file system as read write perm :

command: mount -o remount,rw /sysroot/
----------
to tell that the main root file system is in /sysroot/
mou
command : chroot /sysroot/

-----------------------------

now i can change the passwd easly by command : passwd 

--------------------------------------------------------

if we see contxt of the file of password : /etc/shadow/ will be ?

as selinux not working so the leble of that file is missing 

to relaple for tha file (/etc/shadow) we will relable all files automaticaly :

-touch /.autorelabel


explination : if we creat that file in rebooting machine selinux weill take order to relabel files in the system 
so the file (/etc/shadow ) we relabeld and work

-------------------------------------------------------------------------------------

to save it from anyone to resset password we set passwrd into the grub


but we can shange it with flash or cd we will do in another lab
